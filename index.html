<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema POS</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <h1>Sistema POS</h1>

  <!-- Navegación -->
  <nav>
    <button class="nav-btn" data-target="seccion-cobro">Cobro</button>
    <button class="nav-btn" data-target="seccion-movimientos">Movimientos</button>
    <button class="nav-btn" data-target="seccion-stock">Stock</button>
    <button class="nav-btn" data-target="seccion-cajeros">Cajeros</button>
    <button class="nav-btn" data-target="seccion-config">Configuración</button>
  </nav>

  <!-- Sección: Cobro -->
  <section id="seccion-cobro" class="seccion">
    <h2>Cobro</h2>
    <div>
      <label for="login-nro">Cajero Nro:</label>
      <input type="text" id="login-nro" />
      <label for="login-pass">Contraseña:</label>
      <input type="password" id="login-pass" />
      <button id="btn-login">Ingresar</button>
    </div>

    <h3>Carrito</h3>
    <input type="text" id="codigo-producto" placeholder="Código producto" />
    <select id="combo-cantidad"></select>
    <button id="btn-agregar">Agregar</button>
    <table id="tabla-cobro">
      <thead>
        <tr>
          <th>Código</th>
          <th>Nombre</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Subtotal</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <p id="total">Total: $0,00</p>
    <button id="btn-cobrar">Cobrar</button>
  </section>

  <!-- Sección: Movimientos -->
  <section id="seccion-movimientos" class="seccion hidden">
    <h2>Movimientos</h2>
    <table id="tabla-movimientos">
      <thead>
        <tr>
          <th>ID</th>
          <th>Total</th>
          <th>Tipo</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <button id="btn-tirar-z">Tirar Z</button>
  </section>

  <!-- Sección: Stock -->
  <section id="seccion-stock" class="seccion hidden">
    <h2>Stock</h2>
    <input type="text" id="stock-codigo" placeholder="Código producto" />
    <select id="stock-cantidad">
      <option value="1">+1</option>
      <option value="5">+5</option>
      <option value="10">+10</option>
    </select>
    <button id="agregar-stock">Agregar stock</button>

    <table id="tabla-stock">
      <thead>
        <tr>
          <th>Código</th>
          <th>Nombre</th>
          <th>Cantidad</th>
          <th>Fecha ingreso</th>
          <th>Precio</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div id="modal-editar" class="hidden"></div>
  </section>

  <!-- Sección: Cajeros -->
  <section id="seccion-cajeros" class="seccion hidden">
    <h2>Cajeros</h2>
    <select id="cajero-nro"></select>
    <input type="text" id="cajero-nombre" placeholder="Nombre" />
    <input type="text" id="cajero-dni" placeholder="DNI" />
    <input type="password" id="cajero-pass" placeholder="Contraseña" />
    <button id="agregar-cajero">Agregar cajero</button>

    <table id="tabla-cajeros">
      <thead>
        <tr>
          <th>Nro</th>
          <th>Nombre</th>
          <th>DNI</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Sección: Configuración -->
  <section id="seccion-config" class="seccion hidden">
    <h2>Configuración</h2>
    <input type="text" id="config-nombre" placeholder="Nombre comercio" />
    <input type="password" id="config-pass" placeholder="Contraseña admin" />
    <button id="guardar-config">Guardar configuración</button>
    <p id="config-msg"></p>
    <hr />
    <input type="password" id="master-pass" placeholder="Clave maestra" />
    <button id="btn-restaurar">Restaurar contraseña admin</button>
  </section>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
    import {
      getDatabase,
      ref,
      set,
      update,
      get,
      remove,
      onValue
    } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";

    // Configuración Firebase (no necesitas panel, esto se carga directo desde JS)
    const firebaseConfig = {
      apiKey: "AIzaSyXXXXXXX",
      authDomain: "tu-proyecto.firebaseapp.com",
      databaseURL: "https://tu-proyecto-default-rtdb.firebaseio.com",
      projectId: "tu-proyecto",
      storageBucket: "tu-proyecto.appspot.com",
      messagingSenderId: "123456789",
      appId: "1:123456789:web:abcdef"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Hacemos accesibles las funciones en window para app-1.js y app-2.js
    window.db = db;
    window.ref = ref;
    window.set = set;
    window.update = update;
    window.get = get;
    window.remove = remove;
    window.onValue = onValue;
  </script>

  <!-- Scripts -->
  <script src="app-1.js"></script>
  <script src="app-2.js"></script>
</body>
</html>
